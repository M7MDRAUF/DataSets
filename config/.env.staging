# =============================================================================
# CineMatch Environment Configuration - Staging
# Task 4.6: Environment-specific configurations
# =============================================================================
# Staging environment configuration for pre-production testing
# This environment mirrors production but with test data
# =============================================================================

# -----------------------------------------------------------------------------
# Environment
# -----------------------------------------------------------------------------
CINEMATCH_ENV=staging
DEBUG=false
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# Application
# -----------------------------------------------------------------------------
APP_NAME=CineMatch-Staging
APP_VERSION=2.1.6
SECRET_KEY=${STAGING_SECRET_KEY}

# -----------------------------------------------------------------------------
# Server - Streamlit UI
# -----------------------------------------------------------------------------
STREAMLIT_SERVER_PORT=8501
STREAMLIT_SERVER_ADDRESS=0.0.0.0
STREAMLIT_SERVER_HEADLESS=true
STREAMLIT_SERVER_ENABLE_CORS=false
STREAMLIT_SERVER_RUN_ON_SAVE=false
STREAMLIT_BROWSER_GATHER_USAGE_STATS=false
STREAMLIT_SERVER_ENABLE_XSRF_PROTECTION=true

# -----------------------------------------------------------------------------
# Server - API
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=false
API_DEBUG=false

# -----------------------------------------------------------------------------
# Data Configuration
# -----------------------------------------------------------------------------
DATA_DIR=/app/data
MODELS_DIR=/app/models
PROCESSED_DATA_DIR=/app/data/processed
ML_DATA_DIR=/app/data/ml-32m

# -----------------------------------------------------------------------------
# Model Configuration
# -----------------------------------------------------------------------------
MODEL_CACHE_ENABLED=true
MODEL_CACHE_SIZE=500
MODEL_PRELOAD=true
DEFAULT_ALGORITHM=hybrid

# Model Loading Performance (Task 26-30: Preloading Config)
FAST_MODEL_LOAD=true
USE_JOBLIB_MMAP=true
SKIP_HASH_VERIFICATION=true
MODEL_PRELOAD_ON_STARTUP=true
MODEL_PRELOAD_BACKGROUND=true
MODEL_PRELOAD_PRIORITY=hybrid,svd,content_based,item_knn,user_knn
MODEL_WARM_UP_ENABLED=true
MODEL_VERIFY_CACHE_TTL=7200

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
FEATURE_ANALYTICS=true
FEATURE_USER_PROFILES=true
FEATURE_WATCHLIST=true
FEATURE_REAL_TIME_UPDATES=true
FEATURE_A_B_TESTING=true

# -----------------------------------------------------------------------------
# Caching
# -----------------------------------------------------------------------------
CACHE_ENABLED=true
CACHE_TTL=600
CACHE_MAX_SIZE=5000

# Redis
REDIS_ENABLED=true
REDIS_HOST=redis-staging
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_SSL=false

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=500
RATE_LIMIT_WINDOW=60

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
CORS_ENABLED=true
CORS_ORIGINS=https://staging.cinematch.example.com,https://api-staging.cinematch.example.com
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=Content-Type,Authorization

# Authentication
AUTH_ENABLED=true
AUTH_TOKEN_EXPIRY=3600
AUTH_REFRESH_TOKEN_EXPIRY=86400

# TLS
TLS_ENABLED=true
TLS_CERT_PATH=/etc/ssl/certs/tls.crt
TLS_KEY_PATH=/etc/ssl/certs/tls.key

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
LOG_FORMAT=json
LOG_FILE_ENABLED=false
SENTRY_DSN=${SENTRY_DSN_STAGING}
SENTRY_ENVIRONMENT=staging
SENTRY_TRACES_SAMPLE_RATE=0.1

# -----------------------------------------------------------------------------
# Monitoring
# -----------------------------------------------------------------------------
METRICS_ENABLED=true
METRICS_PORT=9090
TRACING_ENABLED=true
TRACING_SAMPLE_RATE=0.1
JAEGER_HOST=jaeger-staging
JAEGER_PORT=6831
PROFILING_ENABLED=false

# -----------------------------------------------------------------------------
# Health Checks
# -----------------------------------------------------------------------------
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30
STARTUP_PROBE_TIMEOUT=120

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
DATABASE_URL=${DATABASE_URL_STAGING}
DATABASE_ECHO=false
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20
DATABASE_POOL_TIMEOUT=30

# -----------------------------------------------------------------------------
# External Services
# -----------------------------------------------------------------------------
MOVIE_API_URL=https://api.themoviedb.org/3
MOVIE_API_KEY=${MOVIE_API_KEY}
MOVIE_API_MOCK=false

# -----------------------------------------------------------------------------
# Resource Limits
# -----------------------------------------------------------------------------
MAX_RECOMMENDATIONS=100
MAX_SEARCH_RESULTS=50
REQUEST_TIMEOUT=30
BATCH_SIZE=1000
